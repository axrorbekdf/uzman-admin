import{u as p,_ as y}from"./BmqrhUpv.js";import{_ as h}from"./DmD2pl4u.js";import{L as b,h as g,K as v,I as l,o as i,x as k,c as _,b as f}from"./D-e5Xl1W.js";import{M as r}from"./D9PEG7kM.js";import"./jC18RFQA.js";import"./4w8HwJQ8.js";import"./CqFJUeWa.js";import"./TTmt9t3h.js";import"./ADEZgYjw.js";const F=b("master",{state:()=>({master:null,masters:[],model:{modelForForm:{entity:{id:void 0,name:void 0,phone:void 0,price:void 0,time:void 0,verify:void 0,experience:void 0,image:void 0,pasport_image:void 0,about:void 0,level_id:void 0,specialist_id:void 0,user_id:void 0},relations:{levels:[],specialists:[],users:[]},viewEntity:{id:{name:"ID",type:"number"},name:{name:"Nomi",type:"string"},phone:{name:"Telefon",type:"string"},price:{name:"Narx",type:"string"},time:{name:"Vaqt",type:"string"},verify:{name:"Tasdiqlash",type:"string"},experience:{name:"Ish tajribasi",type:"string"},image:{name:"Rasm",type:"file"},pasport_image:{name:"Pasport rasm",type:"file"},about:{name:"Haqida",type:"string"},level_id:{name:"Darajasi",type:"object",relation:"name"},specialist_id:{name:"Mutaxasisligi",type:"object",relation:"name"},user_id:{name:"Foydalanuchi",type:"object",relation:"name"}},formTemplate:[{label:"Nomi",name:"name",relation:null},{label:"Telefon",name:"phone",relation:null},{label:"Narxi",name:"price",relation:null},{label:"Vaqt",name:"time",relation:null},{label:"Status",name:"verify",relation:null},{label:"Ish staji",name:"experience",relation:null},{label:"Rasm",name:"image",relation:null},{label:"Pasport image",name:"pasport_image",relation:null},{label:"Haqida",name:"about",relation:null},{label:"Level",name:"level_id",relation:{name:"levels",value:"id",options:"name"}},{label:"Musaxasisligi",name:"specialist_id",relation:{name:"specialists",value:"id",options:"name"}},{label:"Login",name:"user_id",relation:{name:"users",value:"id",options:"name"}}],rules:{name:{rule:"required",message:"To'ldirilishi kerak"},phone:{rule:"required",message:"To'ldirilishi kerak"},price:{rule:"required",message:"To'ldirilishi kerak"},time:{rule:"required",message:"To'ldirilishi kerak"},verify:{rule:"required",message:"To'ldirilishi kerak"},experience:{rule:"required",message:"To'ldirilishi kerak"},image:{rule:"required",message:"To'ldirilishi kerak"},pasport_image:{rule:"required",message:"To'ldirilishi kerak"},about:{rule:"required",message:"To'ldirilishi kerak"},level_id:{rule:"required",message:"To'ldirilishi kerak"},specialist_id:{rule:"required",message:"To'ldirilishi kerak"},user_id:{rule:"required",message:"To'ldirilishi kerak"}}},columns:[{key:"id",label:"ID",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"phone",label:"Telefoni",sortable:!0},{key:"price",label:"Narxi",sortable:!0},{key:"time",label:"Vaqt",sortable:!0},{key:"verify",label:"Status",sortable:!0},{key:"experience",label:"Ish tajribasi",sortable:!0},{key:"image",label:"Rasm",sortable:!0},{key:"pasport_image",label:"Pasport rasm",sortable:!0},{key:"about",label:"Haqida",sortable:!0},{key:"level.name",label:"Daraja",sortable:!0},{key:"specialist.name",label:"Mutaxasisligi",sortable:!0},{key:"Login",label:"user.name",sortable:!0},{key:"date",label:"Sana",sortable:!0},{key:"actions"}]}}),getters:{master:e=>e.master,getList:e=>e.masters},actions:{async getAllList(){try{r.forOptions().then(e=>{this.masters=e.resoult.data}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async getAllLevels(){try{r.forOptions().then(e=>{this.model.modelForForm.relations.levels=e.resoult.data}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async getAllSpecialists(){try{r.forOptions().then(e=>{this.model.modelForForm.relations.specialists=e.resoult.data}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async createMaster(e){try{r.store(e).then(a=>{this.getAllList()}).catch(a=>{console.error("Failed to load posts:",a)})}catch(a){console.error("Failed to load posts:",a)}},async updateMaster(e,a){try{r.update(e,a).then(t=>{this.getAllList()}).catch(t=>{console.error("Failed to load posts:",t)})}catch(t){console.error("Failed to load posts:",t)}},async deleteMaster(e){try{r.delete(e).then(a=>{this.getAllList()}).catch(a=>{console.error("Failed to load posts:",a)})}catch(a){console.error("Failed to load posts:",a)}}}}),q={key:1},V=g({__name:"index",setup(e){const a=p(),t=F();v(async()=>{t.getAllList()});function s(){t.model.modelForForm.entity={id:void 0,name:void 0,phone:void 0,price:void 0,time:void 0,verify:void 0,experience:void 0,image:void 0,pasport_image:void 0,about:void 0,level_id:void 0,specialist_id:void 0,user_id:void 0}}function n(){a.set(!0),t.createMaster(t.model.modelForForm.entity).then(o=>{a.set(!1)}).catch(()=>{a.set(!1)}).finally(()=>{a.set(!1)})}function d(){a.set(!0),t.updateMaster(t.model.modelForForm.entity.id??0,t.model.modelForForm.entity).then(o=>{a.set(!1)}).catch(()=>{a.set(!1)}).finally(()=>{a.set(!1)})}function m(){console.log(t.model.modelForForm.entity.id??0),a.set(!0),t.deleteMaster(t.model.modelForForm.entity.id??0).then(o=>{a.set(!1)}).catch(()=>{a.set(!1)}).finally(()=>{a.set(!1)})}return(o,x)=>{const c=y,u=h;return l(a).isLoading?(i(),k(c,{key:0})):(i(),_("div",q,[f(u,{data:l(t).getList,model:l(t).model,"clear-entity":s,"create-model":n,"update-model":d,"delete-model":m},null,8,["data","model"])]))}}});export{V as default};
