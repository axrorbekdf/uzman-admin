import{u as h,_ as k}from"./Cc47K-Rv.js";import{_ as y}from"./CGsy4ja7.js";import{L as f,h as x,K as E,I as l,o as m,x as F,c as _,b as g}from"./2XIwiKPe.js";import{M}from"./tj1jBA7m.js";import{u as r}from"./CkKw5vfm.js";import"./Dj5zMPua.js";import"./BdxJGI4k.js";import"./G3tm5WSf.js";import"./CteZaZwF.js";const a={index(e){return r()("master/example/work/index",{method:"GET",params:e})},forOptions(){return r()("master/example/work/for/options",{method:"GET"})},view(e){return r()(`master/example/work/view/${e}`,{method:"GET"})},store(e){return r()("master/example/work/store",{method:"POST",body:e})},update(e,t){return r()(`master/example/work/update/${e}`,{method:"PUT",body:t})},delete(e){return r()(`master/example/work/delete/${e}`,{method:"DELETE"})}},W=f("masterExampleWork",{state:()=>({masterExampleWork:null,masterExampleWorks:[],masters:[],model:{modelForForm:{entity:{id:void 0,images:void 0,master_id:void 0},relations:{masters:[]},viewEntity:{id:{name:"ID",type:"number"},images:{name:"Rasmlar",type:"file"},master:{name:"Master",type:"object",relation:"name"}},formTemplate:[{label:"Rasmlar",name:"images",relation:null},{label:"Master",name:"master_id",relation:{name:"masters",value:"id",options:"name"}}],rules:{images:{rule:"required",message:"To'ldirilishi kerak"},master_id:{rule:"required",message:"To'ldirilishi kerak"}}},columns:[{key:"id",label:"ID",sortable:!0},{key:"images",label:"Rasmlar",sortable:!0},{key:"master.name",label:"Master",sortable:!0},{key:"date",label:"Sana",sortable:!0},{key:"actions"}]}}),getters:{masterExampleWork:e=>e.masterExampleWork,getList:e=>e.masterExampleWorks},actions:{async getAllList(){try{a.forOptions().then(e=>{this.masterExampleWorks=e.resoult.data}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async getAllMasters(){try{M.forOptions().then(e=>{this.model.modelForForm.relations.masters=e.resoult.data}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async createMasterExampleWork(e){try{a.store(e).then(t=>{this.getAllList()}).catch(t=>{console.error("Failed to load posts:",t)})}catch(t){console.error("Failed to load posts:",t)}},async updateMasterExampleWork(e,t){try{a.update(e,t).then(o=>{this.getAllList()}).catch(o=>{console.error("Failed to load posts:",o)})}catch(o){console.error("Failed to load posts:",o)}},async deleteMasterExampleWork(e){try{a.delete(e).then(t=>{this.getAllList()}).catch(t=>{console.error("Failed to load posts:",t)})}catch(t){console.error("Failed to load posts:",t)}}}}),b={key:1},G=x({__name:"index",setup(e){const t=h(),o=W();E(async()=>{o.getAllList(),o.getAllMasters()});function i(){o.model.modelForForm.entity={id:void 0,images:void 0,master_id:void 0}}function n(){t.set(!0),o.createMasterExampleWork(o.model.modelForForm.entity).then(s=>{t.set(!1)}).catch(()=>{t.set(!1)}).finally(()=>{t.set(!1)})}function d(){t.set(!0),o.updateMasterExampleWork(o.model.modelForForm.entity.id??0,o.model.modelForForm.entity).then(s=>{t.set(!1)}).catch(()=>{t.set(!1)}).finally(()=>{t.set(!1)})}function c(){console.log(o.model.modelForForm.entity.id??0),t.set(!0),o.deleteMasterExampleWork(o.model.modelForForm.entity.id??0).then(s=>{t.set(!1)}).catch(()=>{t.set(!1)}).finally(()=>{t.set(!1)})}return(s,v)=>{const p=k,u=y;return l(t).isLoading?(m(),F(p,{key:0})):(m(),_("div",b,[g(u,{data:l(o).getList,model:l(o).model,"clear-entity":i,"create-model":n,"update-model":d,"delete-model":c},null,8,["data","model"])]))}}});export{G as default};
