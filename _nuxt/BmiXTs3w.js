import{u as g,_ as p}from"./E5eY1HYs.js";import{_ as h}from"./DT4Qrwi1.js";import{L as f,h as F,K as _,I as l,o as n,x as k,c as C,b}from"./CyW6ln_T.js";import{u as r}from"./ADEZgYjw.js";import"./CAgyZXcW.js";import"./DmkjJ-29.js";import"./D_a5e0f2.js";import"./CV-j3f-r.js";const a={index(t){return r()("category/index",{method:"GET",params:t})},forOptions(){return r()("category/for/options",{method:"GET"})},view(t){return r()(`category/view/${t}`,{method:"GET"})},store(t){return r()("category/store",{method:"POST",body:t})},update(t,e){return r()(`category/update/${t}`,{method:"PUT",body:e})},delete(t){return r()(`category/delete/${t}`,{method:"DELETE"})}},L=f("category",{state:()=>({category:null,categories:[],model:{modelForForm:{entity:{id:void 0,name:void 0,icon:void 0},formTemplate:[{label:"Category nomi",name:"name"},{label:"Category icon",name:"icon"}],rules:{name:{rule:"required",message:"To'ldirilishi kerak"},icon:{rule:"required",message:"To'ldirilishi kerak"}}},columns:[{key:"id",label:"ID",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"icon",label:"Icon",sortable:!0},{key:"date",label:"Sana",sortable:!0},{key:"actions"}]}}),getters:{category:t=>t.category,getList:t=>t.categories},actions:{async getAllList(){try{a.forOptions().then(t=>{this.categories=t.resoult.data}).catch(t=>{console.error("Failed to load posts:",t)})}catch(t){console.error("Failed to load posts:",t)}},async createCategory(t){try{a.store(t).then(e=>{this.getAllList()}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async updateCategory(t,e){try{a.update(t,e).then(o=>{this.getAllList()}).catch(o=>{console.error("Failed to load posts:",o)})}catch(o){console.error("Failed to load posts:",o)}},async deleteCategory(t){try{a.delete(t).then(e=>{this.getAllList()}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}}}}),v={key:1},O=F({__name:"index",setup(t){const e=g(),o=L();_(async()=>{o.getAllList()});function i(){o.model.modelForForm.entity={id:void 0,name:void 0,icon:void 0}}function c(){e.set(!0),o.createCategory(o.model.modelForForm.entity).then(s=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}function d(){e.set(!0),o.updateCategory(o.model.modelForForm.entity.id??0,o.model.modelForForm.entity).then(s=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}function m(){console.log(o.model.modelForForm.entity.id??0),e.set(!0),o.deleteCategory(o.model.modelForForm.entity.id??0).then(s=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}return(s,T)=>{const y=p,u=h;return l(e).isLoading?(n(),k(y,{key:0})):(n(),C("div",v,[b(u,{data:l(o).getList,model:l(o).model,"clear-entity":i,"create-model":c,"update-model":d,"delete-model":m},null,8,["data","model"])]))}}});export{O as default};
