import{u as p,_ as f}from"./D7Y6F0oq.js";import{_ as h}from"./CGn5A7Od.js";import{L as y,h as F,K as g,I as a,o as n,x as k,c as b,b as x}from"./BwuoVgSa.js";import{u as r}from"./CkKw5vfm.js";import"./B0B3R0cj.js";import"./CHAKl97U.js";import"./C906BHfi.js";import"./cTasHr8w.js";const s={index(t){return r()("comment/index",{method:"GET",params:t})},forOptions(){return r()("comment/for/options",{method:"GET"})},view(t){return r()(`comment/view/${t}`,{method:"GET"})},store(t){return r()("comment/store",{method:"POST",body:t})},update(t,e){return r()(`comment/update/${t}`,{method:"PUT",body:e})},delete(t){return r()(`comment/delete/${t}`,{method:"DELETE"})}},L=y("comment",{state:()=>({comment:null,comments:[],model:{modelForForm:{entity:{id:void 0,text:void 0,user_from_id:void 0,user_to_id:void 0},formTemplate:[{label:"Text",name:"text"},{label:"Userdan",name:"user_from_id"},{label:"Userga",name:"user_to_id"}],rules:{text:{rule:"required",message:"To'ldirilishi kerak"},user_from_id:{rule:"required",message:"To'ldirilishi kerak"},user_to_id:{rule:"required",message:"To'ldirilishi kerak"}}},columns:[{key:"id",label:"ID",sortable:!0},{key:"text",label:"Text",sortable:!0},{key:"user_from_id",label:"Userdan",sortable:!0},{key:"user_to_id",label:"Userga",sortable:!0},{key:"date",label:"Sana",sortable:!0},{key:"actions"}]}}),getters:{comment:t=>t.comment,getList:t=>t.comments},actions:{async getAllList(){try{s.forOptions().then(t=>{this.comments=t.resoult.data}).catch(t=>{console.error("Failed to load posts:",t)})}catch(t){console.error("Failed to load posts:",t)}},async createComment(t){try{s.store(t).then(e=>{this.getAllList()}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async updateComment(t,e){try{s.update(t,e).then(o=>{this.getAllList()}).catch(o=>{console.error("Failed to load posts:",o)})}catch(o){console.error("Failed to load posts:",o)}},async deleteComment(t){try{s.delete(t).then(e=>{this.getAllList()}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}}}}),v={key:1},G=F({__name:"index",setup(t){const e=p(),o=L();g(async()=>{o.getAllList()});function m(){o.model.modelForForm.entity={id:void 0,text:void 0,user_from_id:void 0,user_to_id:void 0}}function d(){e.set(!0),o.createComment(o.model.modelForForm.entity).then(l=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}function i(){e.set(!0),o.updateComment(o.model.modelForForm.entity.id??0,o.model.modelForForm.entity).then(l=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}function c(){console.log(o.model.modelForForm.entity.id??0),e.set(!0),o.deleteComment(o.model.modelForForm.entity.id??0).then(l=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}return(l,C)=>{const u=f,_=h;return a(e).isLoading?(n(),k(u,{key:0})):(n(),b("div",v,[x(_,{data:a(o).getList,model:a(o).model,"clear-entity":m,"create-model":d,"update-model":i,"delete-model":c},null,8,["data","model"])]))}}});export{G as default};
