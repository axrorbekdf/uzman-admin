import{u as y,_ as h}from"./OE-iVYja.js";import{_ as f}from"./T9zb2FQT.js";import{L as _,h as g,K as F,I as i,o as l,x as S,c as b,b as k}from"./CZtNgAxi.js";import{u as s}from"./CkKw5vfm.js";import"./K07SeaZw.js";import"./B_YYKSCv.js";import"./Du1CYpPk.js";import"./BZAvPXmG.js";const a={index(t){return s()("specialist/index",{method:"GET",params:t})},forOptions(){return s()("specialist/for/options",{method:"GET"})},view(t){return s()(`specialist/view/${t}`,{method:"GET"})},store(t){return s()("specialist/store",{method:"POST",body:t})},update(t,e){return s()(`specialist/update/${t}`,{method:"PUT",body:e})},delete(t){return s()(`specialist/delete/${t}`,{method:"DELETE"})}},L=_("specialist",{state:()=>({specialist:null,specialists:[],model:{modelForForm:{entity:{id:void 0,name:void 0,category_id:void 0},viewEntity:{id:{name:"ID",type:"number"},name:{name:"Nomi",type:"string"},category:{name:"Category",type:"object",relation:"name"}},formTemplate:[{label:"Category nomi",name:"name"},{label:"Category",name:"category_id"}],rules:{name:{rule:"required",message:"To'ldirilishi kerak"},category_id:{rule:"required",message:"To'ldirilishi kerak"}}},columns:[{key:"id",label:"ID",sortable:!0},{key:"name",label:"Name",sortable:!0},{key:"category.name",label:"Category",sortable:!0},{key:"date",label:"Sana",sortable:!0},{key:"actions"}]}}),getters:{specialist:t=>t.specialist,getList:t=>t.specialists},actions:{async getAllList(){try{a.forOptions().then(t=>{this.specialists=t.resoult.data}).catch(t=>{console.error("Failed to load posts:",t)})}catch(t){console.error("Failed to load posts:",t)}},async createSpecialist(t){try{a.store(t).then(e=>{this.getAllList()}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}},async updateSpecialist(t,e){try{a.update(t,e).then(o=>{this.getAllList()}).catch(o=>{console.error("Failed to load posts:",o)})}catch(o){console.error("Failed to load posts:",o)}},async deleteSpecialist(t){try{a.delete(t).then(e=>{this.getAllList()}).catch(e=>{console.error("Failed to load posts:",e)})}catch(e){console.error("Failed to load posts:",e)}}}}),v={key:1},G=g({__name:"index",setup(t){const e=y(),o=L();F(async()=>{o.getAllList()});function n(){o.model.modelForForm.entity={id:void 0,name:void 0,category_id:void 0}}function c(){e.set(!0),o.createSpecialist(o.model.modelForForm.entity).then(r=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}function d(){e.set(!0),o.updateSpecialist(o.model.modelForForm.entity.id??0,o.model.modelForForm.entity).then(r=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}function m(){console.log(o.model.modelForForm.entity.id??0),e.set(!0),o.deleteSpecialist(o.model.modelForForm.entity.id??0).then(r=>{e.set(!1)}).catch(()=>{e.set(!1)}).finally(()=>{e.set(!1)})}return(r,E)=>{const p=h,u=f;return i(e).isLoading?(l(),S(p,{key:0})):(l(),b("div",v,[k(u,{data:i(o).getList,model:i(o).model,"clear-entity":n,"create-model":c,"update-model":d,"delete-model":m},null,8,["data","model"])]))}}});export{G as default};
